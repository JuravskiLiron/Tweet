@using System.Diagnostics
@model Tweet.Models.Comment

<div class="comment" style="margin-left: @(Model.ParentCommentId != null ? "30px" : "0")">
    <p><strong>@Model.User.UserName</strong>
        @Model.CreatedDate.ToString("g")</p>
    <p>@Model.Content</p>
    @if (User.Identity.IsAuthenticated && Model.User.UserName == User.Identity.Name)
    {
        <a asp-controller="Comment" asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary btn-sm">Edit</a>
        <a asp-controller="Comment" asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger btn-sm">Delete</a> 
    }

    <form method="post" asp-action="ToggleLike" asp-controller="Comment">
        <input type="hidden" name="commentId" value="@Model.Id" />
        <input type="hidden" name="postId" value="@Model.PostId" />
        <button type="submit">@Model.Likes.Count</button>
    </form>

    <form method="post" asp-action="AddComment" asp-controller="Comment">
        <input type="hidden" name="postId" value="@Model.PostId"/>
        <input type="hidden" name="parentCommentId" value="@Model.Id"/>
        <textarea name="content" placeholder="Reply..." required></textarea>
        <button type="submit">Reply</button>
    </form>
    
    @foreach (var reply in Model.Replies)
    {
        <partial name="_CommentWithReplies" model="reply"/>
    }
</div>






























